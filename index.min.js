/*Author : AL EMRAN
email:emrancu1@gmail.com
website:http://alemran.me
*/

export const SSLPayment=function(){let t=!1;const n=function(){$(".payment-modal-container").addClass("payment-active"),$("body").addClass("payment-modal-active")},e=function(t,n){return`\n\t <div class="payment-modal-container">\n     <div class="payment-modal-content">\n        <div class="payment-modal-header">\n            <div class="payment-logo">\n                <img src="${n}" class="payment-logo-img" alt="">\n            </div>\n            <div class="payment-close-button"  >x</div>\n        </div>\n        <div class="payment-modal-body">\n            <iframe src="${t}"  >\n            </iframe>\n        </div>\n     </div>\n     <div class="payment-modal-bg"></div>\n     </div>`},o=function(){$("body").find("#ssl-payment-modal").on("click",".payment-close-button",function(){$(".payment-modal-container").removeClass("payment-active"),$("body").removeClass("payment-modal-active"),setTimeout(()=>{$("body").find("#ssl-payment-modal").html("")},300)}),window.addEventListener("message",function(t){if("https://sandbox.sslcommerz.com"===t.origin){let n=JSON.parse(t.data);"otp"==n.type&&window.location.replace(n.url)}})};let a=function(){$("body").prepend("<style>.payment-close-button{font-size:18px;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.8;position:absolute;right:10px;z-index:999999;top:9px;font-weight:600;border-radius:50%;border:1px solid red;height:25px;width:25px;text-align:center;cursor:pointer}.payment-modal-header{position:relative;padding-bottom:35px}.payment-modal-header>.payment-logo>.payment-logo-img{max-width:90px}.payment-modal-header>.payment-logo{position:absolute;top:-50px;left:0;right:0;z-index:999;text-align:center}.payment-modal-container.payment-active{opacity:1;visibility:visible;z-index:999;transition:all .6s}.payment-modal-container{position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;background:rgba(0,0,0,.5);justify-content:center;padding-top:100px;opacity:0;visibility:hidden;z-index:-1;transition:all .6s}.payment-modal-content{background-color:#fff}.payment-modal-body{position:relative;flex-shrink:0;margin-top:auto;margin-bottom:auto;width:340px;border-radius:6px;background:#fff;opacity:1;cursor:auto;transition:transform .3s cubic-bezier(.175,.885,.32,1.275)}.payment-modal-body>iframe{border:none;margin:0;padding:0;display:block;height:570px;width:340px;border-radius:5px}body.payment-modal-active{overflow-y:hidden!important}</style>"),$("body").append('<div id="ssl-payment-modal"></div>'),t=!0,setTimeout(()=>{o()},200)};return{OpenModalWithRequest:function(o,i){!function(o,i){t||a(),fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>t.json()).then(t=>{if("success"===t.status&&t.data){let o=t.data+"?full=1",a=t.logo,i=e(o,a);$("body").find("#ssl-payment-modal").html(i),setTimeout(()=>{n()},100)}else alert("Something went wrong")}).catch(t=>{alert("Something went wrong")})}(o,i)},OpenModal:function(o,i){!function(o,i){t||a();let d=e(o+"?full=1",i);$("body").find("#ssl-payment-modal").html(d),setTimeout(()=>{n()},100)}(o,i)}}}();